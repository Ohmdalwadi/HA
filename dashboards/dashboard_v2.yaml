# ==================== MODERN DASHBOARD V2 ====================
# Glass Morphism Design | Room-Based Layout | Energy Analytics
# Updated: October 2025

title: Smart Home Hub
theme: Backend-selected

views:
  # ==================== HOME (LANDING PAGE) ====================
  - title: Home
    path: home
    icon: mdi:home
    type: sections
    background: >
      linear-gradient(135deg, #667eea 0%, #764ba2 100%)
    sections:
      # === HERO STATUS CARD ===
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Welcome Home
            subtitle: >
              {{ now().strftime('%A, %B %d') }} ‚Ä¢ {{ now().strftime('%I:%M %p') }}
            card_mod:
              style: |
                ha-card {
                  background: rgba(255, 255, 255, 0.95) !important;
                  backdrop-filter: blur(20px) !important;
                  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
                  border-radius: 24px !important;
                  padding: 24px !important;
                }

          - type: custom:mushroom-chips-card
            alignment: center
            chips:
              - type: template
                icon: mdi:home-account
                content: |
                  {{ 'Vacation' if is_state('input_boolean.mode_vacation','on')
                     else 'Home' if is_state('input_boolean.mode_home','on')
                     else 'Guest' if is_state('input_boolean.mode_guest','on')
                     else 'Sleep' if is_state('input_boolean.mode_sleep','on')
                     else 'Away' if is_state('input_boolean.mode_away','on')
                     else 'No Mode' }}
                icon_color: |
                  {{ 'cyan' if is_state('input_boolean.mode_vacation','on')
                     else 'green' if is_state('input_boolean.mode_home','on')
                     else 'purple' if is_state('input_boolean.mode_guest','on')
                     else 'blue' if is_state('input_boolean.mode_sleep','on')
                     else 'amber' if is_state('input_boolean.mode_away','on')
                     else 'grey' }}

              - type: template
                icon: mdi:lightning-bolt
                content: "{{ states('sensor.total_house_power') | round(0) }} W"
                icon_color: >
                  {% set power = states('sensor.total_house_power') | float(0) %}
                  {% if power > 5000 %}red
                  {% elif power > 2000 %}amber
                  {% else %}green
                  {% endif %}

              - type: template
                icon: mdi:cash
                content: "${{ states('sensor.energy_cost_today') }}"
                icon_color: blue

      # === QUICK ACTIONS ===
      - type: grid
        title: Quick Actions
        cards:
          - type: custom:mushroom-template-card
            primary: All Lights Off
            secondary: Turn off all lighting
            icon: mdi:lightbulb-group-off
            icon_color: amber
            tap_action:
              action: call-service
              service: light.turn_off
              target:
                entity_id: all
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, #FFF4E6 0%, #FFE0B2 100%) !important;
                  border: none !important;
                  box-shadow: 0 4px 16px rgba(255, 152, 0, 0.2) !important;
                }

          - type: custom:mushroom-template-card
            primary: Good Night
            secondary: Sleep mode + lock doors
            icon: mdi:weather-night
            icon_color: indigo
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mode_sleep
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%) !important;
                  border: none !important;
                  box-shadow: 0 4px 16px rgba(63, 81, 181, 0.2) !important;
                }

          - type: custom:mushroom-template-card
            primary: Leaving Home
            secondary: Away mode + AC off
            icon: mdi:home-export-outline
            icon_color: amber
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mode_away
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%) !important;
                  border: none !important;
                  box-shadow: 0 4px 16px rgba(255, 235, 59, 0.2) !important;
                }

      # === ROOMS OVERVIEW ===
      - type: grid
        title: Rooms
        columns: 2
        cards:
          - type: custom:mushroom-template-card
            primary: Living Room
            secondary: "{{ states('sensor.living_room_total_power') | round(0) }} W"
            icon: mdi:sofa
            icon_color: >
              {% set power = states('sensor.living_room_total_power') | float(0) %}
              {% if power > 1000 %}red
              {% elif power > 300 %}amber
              {% else %}green
              {% endif %}
            tap_action:
              action: navigate
              navigation_path: /dashboard-smart-home-hub/living-room
            card_mod:
              style: |
                ha-card {
                  background: rgba(255, 255, 255, 0.95) !important;
                  backdrop-filter: blur(10px) !important;
                }

          - type: custom:mushroom-template-card
            primary: Kitchen
            secondary: "{{ states('sensor.kitchen_total_power') | round(0) }} W"
            icon: mdi:chef-hat
            icon_color: >
              {% set power = states('sensor.kitchen_total_power') | float(0) %}
              {% if power > 2000 %}red
              {% elif power > 500 %}amber
              {% else %}green
              {% endif %}
            tap_action:
              action: navigate
              navigation_path: /dashboard-smart-home-hub/kitchen
            card_mod:
              style: |
                ha-card {
                  background: rgba(255, 255, 255, 0.95) !important;
                  backdrop-filter: blur(10px) !important;
                }

          - type: custom:mushroom-template-card
            primary: Bedroom
            secondary: "{{ states('sensor.bedroom_total_power') | round(0) }} W"
            icon: mdi:bed
            icon_color: >
              {% set power = states('sensor.bedroom_total_power') | float(0) %}
              {% if power > 200 %}amber
              {% else %}green
              {% endif %}
            tap_action:
              action: navigate
              navigation_path: /dashboard-smart-home-hub/bedroom
            card_mod:
              style: |
                ha-card {
                  background: rgba(255, 255, 255, 0.95) !important;
                  backdrop-filter: blur(10px) !important;
                }

          - type: custom:mushroom-template-card
            primary: Office
            secondary: "{{ states('sensor.office_total_power') | round(0) }} W"
            icon: mdi:desk
            icon_color: >
              {% set power = states('sensor.office_total_power') | float(0) %}
              {% if power > 400 %}amber
              {% else %}green
              {% endif %}
            tap_action:
              action: navigate
              navigation_path: /dashboard-smart-home-hub/office
            card_mod:
              style: |
                ha-card {
                  background: rgba(255, 255, 255, 0.95) !important;
                  backdrop-filter: blur(10px) !important;
                }

      # === ENERGY OVERVIEW ===
      - type: grid
        title: Energy Today
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.house_energy_today
            name: Total Energy
            icon: mdi:lightning-bolt
            icon_color: >
              {% set energy = states('sensor.house_energy_today') | float(0) %}
              {% set budget = states('input_number.daily_energy_budget_kwh') | float(100) %}
              {% if energy >= budget %}red
              {% elif energy >= budget * 0.8 %}amber
              {% else %}green
              {% endif %}

          - type: custom:mushroom-entity-card
            entity: sensor.energy_budget_percent
            name: Budget Used
            icon: mdi:percent
            icon_color: >
              {% set pct = states('sensor.energy_budget_percent') | float(0) %}
              {% if pct >= 100 %}red
              {% elif pct >= 80 %}amber
              {% else %}green
              {% endif %}

          - type: custom:mushroom-entity-card
            entity: sensor.energy_cost_today
            name: Cost Today
            icon: mdi:currency-usd
            icon_color: blue

  # ==================== LIVING ROOM ====================
  - title: Living Room
    path: living-room
    icon: mdi:sofa
    type: sections
    background: >
      linear-gradient(135deg, #f093fb 0%, #f5576c 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Living Room
            subtitle: "Power: {{ states('sensor.living_room_total_power') | round(0) }} W"

      - type: grid
        title: Entertainment
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.tv_switch
            name: TV
            icon: mdi:television
            layout: vertical
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: switch.sound_bar
            name: Sound Bar
            icon: mdi:speaker
            layout: vertical
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: switch.gaming_console
            name: Gaming Console
            icon: mdi:controller
            layout: vertical
            tap_action:
              action: toggle

      - type: grid
        title: Lighting
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: light.living_room_ceiling
            name: Ceiling Lights
            icon: mdi:ceiling-light
            layout: vertical
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: light.floor_lamp
            name: Floor Lamp
            icon: mdi:floor-lamp
            layout: vertical
            tap_action:
              action: toggle

      - type: grid
        title: Climate & Cleaning
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.air_conditioner
            name: Air Conditioner
            icon: mdi:air-conditioner
            layout: vertical
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: switch.robot_vacuum
            name: Robot Vacuum
            icon: mdi:robot-vacuum
            layout: vertical
            tap_action:
              action: toggle

  # ==================== KITCHEN ====================
  - title: Kitchen
    path: kitchen
    icon: mdi:chef-hat
    type: sections
    background: >
      linear-gradient(135deg, #fa709a 0%, #fee140 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Kitchen
            subtitle: "Power: {{ states('sensor.kitchen_total_power') | round(0) }} W"

      - type: grid
        title: Appliances
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.kettle_switch
            name: Kettle
            icon: mdi:kettle
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.coffee_maker
            name: Coffee
            icon: mdi:coffee-maker
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.microwave
            name: Microwave
            icon: mdi:microwave
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.oven
            name: Oven
            icon: mdi:stove
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.toaster
            name: Toaster
            icon: mdi:toaster-oven
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.slow_cooker
            name: Slow Cooker
            icon: mdi:pot-steam
            layout: vertical

      - type: grid
        title: Large Appliances
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.refrigerator
            name: Refrigerator
            icon: mdi:fridge
            layout: vertical
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: switch.dishwasher
            name: Dishwasher
            icon: mdi:dishwasher
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.range_hood
            name: Range Hood
            icon: mdi:fan
            layout: vertical

  # ==================== BEDROOM ====================
  - title: Bedroom
    path: bedroom
    icon: mdi:bed
    type: sections
    background: >
      linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Bedroom
            subtitle: "Power: {{ states('sensor.bedroom_total_power') | round(0) }} W"

      - type: grid
        title: Devices
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: light.bedside_lamp
            name: Bedside Lamp
            icon: mdi:lamp
            layout: vertical

  # ==================== OFFICE ====================
  - title: Office
    path: office
    icon: mdi:desk
    type: sections
    background: >
      linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Home Office
            subtitle: "Power: {{ states('sensor.office_total_power') | round(0) }} W"

      - type: grid
        title: Workstation
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: light.desk_lamp
            name: Desk Lamp
            icon: mdi:desk-lamp
            layout: vertical

  # ==================== ENERGY ANALYTICS ====================
  - title: Energy
    path: energy
    icon: mdi:chart-line
    type: sections
    background: >
      linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Energy Analytics
            subtitle: Real-time monitoring & insights

      - type: grid
        title: Current Status
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.total_house_power
            name: Live Power
            icon: mdi:lightning-bolt
            icon_color: amber

          - type: custom:mushroom-entity-card
            entity: sensor.house_energy_today
            name: Energy Today
            icon: mdi:flash
            icon_color: blue

          - type: custom:mushroom-entity-card
            entity: sensor.energy_cost_today
            name: Cost Today
            icon: mdi:currency-usd
            icon_color: green

      - type: grid
        title: Budget Tracking
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.energy_budget_percent
            name: Budget Used
            icon: mdi:percent
            icon_color: >
              {% set pct = states('sensor.energy_budget_percent') | float(0) %}
              {% if pct >= 100 %}red
              {% elif pct >= 80 %}amber
              {% else %}green
              {% endif %}

          - type: custom:mushroom-entity-card
            entity: sensor.energy_budget_remaining
            name: Remaining
            icon: mdi:battery-charging-80
            icon_color: green

          - type: custom:mushroom-entity-card
            entity: input_number.daily_energy_budget_kwh
            name: Daily Budget
            icon: mdi:cash-clock

      - type: grid
        title: Room Breakdown
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.living_room_total_power
            name: Living Room
            icon: mdi:sofa
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: sensor.kitchen_total_power
            name: Kitchen
            icon: mdi:chef-hat
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: sensor.bedroom_total_power
            name: Bedroom
            icon: mdi:bed
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: sensor.office_total_power
            name: Office
            icon: mdi:desk
            secondary_info: state

      - type: grid
        title: Power History
        cards:
          - type: history-graph
            title: Power Draw (24 Hours)
            hours_to_show: 24
            entities:
              - entity: sensor.total_house_power
                name: Total Power

  # ==================== MODES & POLICIES ====================
  - title: Modes
    path: modes
    icon: mdi:tune-variant
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Policy Engine
            subtitle: Modes & Overlays

      - type: grid
        title: Base Modes
        columns: 2
        cards:
          - type: custom:mushroom-template-card
            primary: Home
            secondary: Living & Active
            icon: mdi:home
            icon_color: >
              {{ 'green' if is_state('input_boolean.mode_home','on') else 'grey' }}
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mode_home

          - type: custom:mushroom-template-card
            primary: Guest
            secondary: Visitors Present
            icon: mdi:account-group
            icon_color: >
              {{ 'purple' if is_state('input_boolean.mode_guest','on') else 'grey' }}
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mode_guest

          - type: custom:mushroom-template-card
            primary: Sleep
            secondary: Rest & Quiet
            icon: mdi:power-sleep
            icon_color: >
              {{ 'blue' if is_state('input_boolean.mode_sleep','on') else 'grey' }}
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mode_sleep

          - type: custom:mushroom-template-card
            primary: Away
            secondary: House Empty
            icon: mdi:home-export-outline
            icon_color: >
              {{ 'amber' if is_state('input_boolean.mode_away','on') else 'grey' }}
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mode_away

          - type: custom:mushroom-template-card
            primary: Vacation
            secondary: Extended Away
            icon: mdi:airplane
            icon_color: >
              {{ 'cyan' if is_state('input_boolean.mode_vacation','on') else 'grey' }}
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              target:
                entity_id: input_boolean.mode_vacation

      - type: grid
        title: Overlays
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.overlay_wfh
            name: Work From Home
            icon: mdi:laptop
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.overlay_pet_home
            name: Pet at Home
            icon: mdi:dog
            tap_action:
              action: toggle

  # ==================== LAUNDRY ====================
  - title: Laundry
    path: laundry
    icon: mdi:washing-machine
    type: sections
    background: >
      linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Laundry Room
            subtitle: Large appliances

      - type: grid
        title: Appliances
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.washing_machine
            name: Washing Machine
            icon: mdi:washing-machine
            layout: vertical
            tap_action:
              action: toggle
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: switch.dryer
            name: Dryer
            icon: mdi:tumble-dryer
            layout: vertical
            tap_action:
              action: toggle
            secondary_info: state

      - type: grid
        title: Power Usage
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.washing_machine_power
            name: Washer Power
            icon: mdi:flash
            icon_color: blue

          - type: custom:mushroom-entity-card
            entity: sensor.dryer_power
            name: Dryer Power
            icon: mdi:flash
            icon_color: red

  # ==================== OUTDOOR / GARAGE ====================
  - title: Outdoor
    path: outdoor
    icon: mdi:tree
    type: sections
    background: >
      linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Outdoor & Garage
            subtitle: Exterior devices

      - type: grid
        title: Lighting
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: light.garden_lights
            name: Garden Lights
            icon: mdi:string-lights
            layout: vertical
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: light.security_floodlights
            name: Security Floodlights
            icon: mdi:outdoor-lamp
            layout: vertical
            tap_action:
              action: toggle

      - type: grid
        title: EV Charging
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.ev_charger
            name: EV Charger
            icon: mdi:ev-station
            icon_color: >
              {{ 'green' if is_state('switch.ev_charger','on') else 'grey' }}
            tap_action:
              action: toggle
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: sensor.ev_charger_power
            name: Charging Power
            icon: mdi:lightning-bolt
            icon_color: amber

  # ==================== INFRASTRUCTURE ====================
  - title: Infrastructure
    path: infrastructure
    icon: mdi:server-network
    type: sections
    background: >
      linear-gradient(135deg, #434343 0%, #000000 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Smart Home Infrastructure
            subtitle: Always-on systems

      - type: grid
        title: Network & Servers
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.wifi_router
            name: WiFi Router
            icon: mdi:router-wireless
            icon_color: green
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: switch.nas_server
            name: NAS Server
            icon: mdi:server
            icon_color: blue
            tap_action:
              action: toggle

      - type: grid
        title: Power Draw
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.wifi_router_power
            name: Router
            icon: mdi:flash
            icon_color: amber

          - type: custom:mushroom-entity-card
            entity: sensor.nas_server_power
            name: NAS
            icon: mdi:flash
            icon_color: amber

  # ==================== ALL DEVICES ====================
  - title: All Devices
    path: devices
    icon: mdi:devices
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: All Devices
            subtitle: Complete device list

      - type: grid
        title: Living Room ({{ states('sensor.living_room_total_power') | round(0) }} W)
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.tv_switch
            name: TV
            icon: mdi:television
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.sound_bar
            name: Sound Bar
            icon: mdi:speaker
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.gaming_console
            name: Console
            icon: mdi:controller
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: light.floor_lamp
            name: Floor Lamp
            icon: mdi:floor-lamp
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: light.living_room_ceiling
            name: Ceiling
            icon: mdi:ceiling-light
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.air_conditioner
            name: AC
            icon: mdi:air-conditioner
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.robot_vacuum
            name: Vacuum
            icon: mdi:robot-vacuum
            layout: vertical

      - type: grid
        title: Kitchen ({{ states('sensor.kitchen_total_power') | round(0) }} W)
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.kettle_switch
            name: Kettle
            icon: mdi:kettle
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.coffee_maker
            name: Coffee
            icon: mdi:coffee-maker
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.microwave
            name: Microwave
            icon: mdi:microwave
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.oven
            name: Oven
            icon: mdi:stove
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.refrigerator
            name: Fridge
            icon: mdi:fridge
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.dishwasher
            name: Dishwasher
            icon: mdi:dishwasher
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.toaster
            name: Toaster
            icon: mdi:toaster-oven
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.slow_cooker
            name: Slow Cooker
            icon: mdi:pot-steam
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.range_hood
            name: Hood
            icon: mdi:fan
            layout: vertical

      - type: grid
        title: Bedroom ({{ states('sensor.bedroom_total_power') | round(0) }} W)
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: light.bedside_lamp
            name: Bedside Lamp
            icon: mdi:lamp
            layout: vertical

      - type: grid
        title: Office ({{ states('sensor.office_total_power') | round(0) }} W)
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: light.desk_lamp
            name: Desk Lamp
            icon: mdi:desk-lamp
            layout: vertical

      - type: grid
        title: Laundry
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.washing_machine
            name: Washing Machine
            icon: mdi:washing-machine
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.dryer
            name: Dryer
            icon: mdi:tumble-dryer
            layout: vertical

      - type: grid
        title: Outdoor & Infrastructure
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: light.garden_lights
            name: Garden
            icon: mdi:string-lights
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.ev_charger
            name: EV Charger
            icon: mdi:ev-station
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.wifi_router
            name: WiFi
            icon: mdi:router-wireless
            layout: vertical

          - type: custom:mushroom-entity-card
            entity: switch.nas_server
            name: NAS
            icon: mdi:server
            layout: vertical

  # ==================== VOICE CONTROL ====================
  - title: Voice Control
    path: voice
    icon: mdi:microphone
    type: sections
    background: >
      linear-gradient(135deg, #667eea 0%, #764ba2 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Voice Assistant
            subtitle: Virtual voice command simulation

      - type: grid
        title: Quick Voice Commands
        columns: 2
        cards:
          - type: custom:mushroom-select-card
            entity: input_select.voice_command_quick
            name: Quick Commands
            icon: mdi:microphone-message
            fill_container: true

          - type: custom:mushroom-entity-card
            entity: input_text.voice_response
            name: Last Response
            icon: mdi:speaker
            icon_color: blue

      - type: grid
        title: Custom Voice Command
        cards:
          - type: custom:mushroom-text-card
            entity: input_text.voice_command
            name: Type Command
            icon: mdi:microphone-variant

      - type: grid
        title: Supported Commands
        cards:
          - type: markdown
            content: |
              **üé§ Supported Voice Commands:**

              **Lights:**
              - "Turn on all lights"
              - "Turn off all lights"

              **Security:**
              - "Lock all doors"
              - "Unlock all doors"

              **Modes:**
              - "Start WFH mode"
              - "Start vacation mode"
              - "Activate pet mode"

              **Routines:**
              - "Good morning" ‚Üí Home mode + bright scene
              - "Good night" ‚Üí Sleep mode + lock doors
              - "I'm leaving" ‚Üí Away mode
              - "I'm home" ‚Üí Home mode

  # ==================== WEATHER SIMULATION ====================
  - title: Weather
    path: weather
    icon: mdi:weather-partly-cloudy
    type: sections
    background: >
      linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Weather Simulation
            subtitle: "{{ states('input_text.sim_weather_condition') }} ‚Ä¢ {{ states('sensor.outside_temperature') }}¬∞C"

      - type: grid
        title: Weather Presets
        cards:
          - type: custom:mushroom-select-card
            entity: input_select.weather_preset
            name: Quick Presets
            icon: mdi:weather-partly-cloudy
            fill_container: true

      - type: grid
        title: Current Conditions
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.outside_temperature
            name: Temperature
            icon: mdi:thermometer
            icon_color: >
              {% set temp = states('sensor.outside_temperature') | float(20) %}
              {% if temp > 30 %}red
              {% elif temp < 10 %}blue
              {% else %}green
              {% endif %}

          - type: custom:mushroom-entity-card
            entity: sensor.feels_like_temperature
            name: Feels Like
            icon: mdi:thermometer-alert
            icon_color: amber

          - type: custom:mushroom-entity-card
            entity: sensor.outside_humidity
            name: Humidity
            icon: mdi:water-percent
            icon_color: blue

          - type: custom:mushroom-entity-card
            entity: sensor.wind_speed
            name: Wind Speed
            icon: mdi:weather-windy
            icon_color: >
              {{ 'red' if states('sensor.wind_speed')|float > 30 else 'green' }}

          - type: custom:mushroom-entity-card
            entity: sensor.rainfall
            name: Rainfall
            icon: mdi:weather-rainy
            icon_color: >
              {{ 'blue' if states('sensor.rainfall')|float > 1 else 'grey' }}

          - type: custom:mushroom-entity-card
            entity: sensor.uv_index
            name: UV Index
            icon: mdi:white-balance-sunny
            icon_color: >
              {% set uv = states('sensor.uv_index') | float(0) %}
              {% if uv > 7 %}red
              {% elif uv > 5 %}amber
              {% else %}green
              {% endif %}

      - type: grid
        title: Weather Alerts
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.weather_is_hot
            name: Heat Alert
            icon: mdi:thermometer-alert
            icon_color: >
              {{ 'red' if is_state('binary_sensor.weather_is_hot','on') else 'grey' }}

          - type: custom:mushroom-entity-card
            entity: binary_sensor.weather_is_rainy
            name: Rain Alert
            icon: mdi:weather-rainy
            icon_color: >
              {{ 'blue' if is_state('binary_sensor.weather_is_rainy','on') else 'grey' }}

          - type: custom:mushroom-entity-card
            entity: binary_sensor.weather_is_windy
            name: Wind Alert
            icon: mdi:weather-windy
            icon_color: >
              {{ 'red' if is_state('binary_sensor.weather_is_windy','on') else 'grey' }}

      - type: grid
        title: Manual Weather Controls
        columns: 2
        cards:
          - type: custom:mushroom-number-card
            entity: input_number.sim_outside_temp
            name: Temperature
            icon: mdi:thermometer
            display_mode: buttons

          - type: custom:mushroom-number-card
            entity: input_number.sim_humidity
            name: Humidity
            icon: mdi:water-percent
            display_mode: buttons

          - type: custom:mushroom-number-card
            entity: input_number.sim_wind_speed
            name: Wind Speed
            icon: mdi:weather-windy
            display_mode: buttons

          - type: custom:mushroom-number-card
            entity: input_number.sim_rainfall
            name: Rainfall
            icon: mdi:weather-rainy
            display_mode: buttons

  # ==================== CALENDAR & MEETINGS ====================
  - title: Calendar
    path: calendar
    icon: mdi:calendar
    type: sections
    background: >
      linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Calendar & Meetings
            subtitle: WFH meeting integration

      - type: grid
        title: Meeting Status
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.calendar_meeting_active
            name: Meeting Active
            icon: mdi:calendar-clock
            icon_color: >
              {{ 'green' if is_state('binary_sensor.calendar_meeting_active','on') else 'grey' }}

          - type: custom:mushroom-entity-card
            entity: input_boolean.meeting_now
            name: Meeting Mode
            icon: mdi:video
            icon_color: >
              {{ 'red' if is_state('input_boolean.meeting_now','on') else 'grey' }}
            tap_action:
              action: toggle

      - type: grid
        title: Next Meeting
        cards:
          - type: custom:mushroom-entity-card
            entity: input_text.calendar_next_meeting_title
            name: Meeting Title
            icon: mdi:text

          - type: entities
            entities:
              - entity: input_datetime.calendar_meeting_start
                name: Meeting Start
              - entity: input_datetime.calendar_meeting_end
                name: Meeting End

      - type: grid
        title: Info
        cards:
          - type: markdown
            content: |
              **üìÖ How It Works:**

              1. Set meeting title and times
              2. When WFH overlay is ON and meeting time arrives:
                 - `meeting_now` auto-enables
                 - Extra DND activated
                 - 5-min advance warning sent
              3. Meeting auto-ends when time expires

  # ==================== VACATION MODE ====================
  - title: Vacation
    path: vacation
    icon: mdi:airplane
    type: sections
    background: >
      linear-gradient(135deg, #fa709a 0%, #fee140 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Vacation Mode
            subtitle: Extended away with security features

      - type: grid
        title: Vacation Status
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.mode_vacation
            name: Vacation Mode
            icon: mdi:airplane
            icon_color: >
              {{ 'green' if is_state('input_boolean.mode_vacation','on') else 'grey' }}
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: binary_sensor.vacation_active
            name: Date-Based Active
            icon: mdi:calendar-check
            icon_color: >
              {{ 'green' if is_state('binary_sensor.vacation_active','on') else 'grey' }}

      - type: grid
        title: Vacation Dates
        cards:
          - type: entities
            entities:
              - entity: input_datetime.vacation_start_date
                name: Start Date
              - entity: input_datetime.vacation_end_date
                name: End Date
              - entity: input_number.vacation_days_remaining
                name: Days Remaining

      - type: grid
        title: Vacation Features
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.vacation_randomize_lights
            name: Light Randomization
            icon: mdi:lightbulb-auto
            icon_color: amber
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.vacation_collect_packages
            name: Package Collected
            icon: mdi:package-variant
            icon_color: brown
            tap_action:
              action: toggle

      - type: grid
        title: Security
        cards:
          - type: markdown
            content: |
              **‚úàÔ∏è Vacation Mode Features:**

              - All doors locked
              - Energy saver mode (16¬∞C)
              - Light randomization
              - Package delivery detection
              - Daily 12pm check-in notifications
              - Doorbell activity alerts

  # ==================== MULTIPLE PETS ====================
  - title: Pets
    path: pets
    icon: mdi:dog
    type: sections
    background: >
      linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Pet Management
            subtitle: "{{ states('sensor.pets_at_home_count') }} pets at home"

      - type: grid
        title: Pet Status
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.pet_max_home
            name: Max at Home
            icon: mdi:dog
            icon_color: >
              {{ 'green' if is_state('input_boolean.pet_max_home','on') else 'grey' }}
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.pet_buddy_home
            name: Buddy at Home
            icon: mdi:dog
            icon_color: >
              {{ 'blue' if is_state('input_boolean.pet_buddy_home','on') else 'grey' }}
            tap_action:
              action: toggle

      - type: grid
        title: Bark Levels
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.max_bark_level
            name: Max Bark
            icon: mdi:dog
            icon_color: >
              {{ 'red' if is_state('binary_sensor.max_barking','on') else 'green' }}
            secondary_info: state

          - type: custom:mushroom-entity-card
            entity: sensor.buddy_bark_level
            name: Buddy Bark
            icon: mdi:dog
            icon_color: >
              {{ 'red' if is_state('binary_sensor.buddy_barking','on') else 'green' }}
            secondary_info: state

          - type: custom:mushroom-number-card
            entity: input_number.pet_max_bark_db
            name: Max Bark Control
            icon: mdi:volume-high
            display_mode: slider

          - type: custom:mushroom-number-card
            entity: input_number.pet_buddy_bark_db
            name: Buddy Bark Control
            icon: mdi:volume-high
            display_mode: slider

      - type: grid
        title: Barking Alerts
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.max_barking
            name: Max Barking
            icon: mdi:dog
            icon_color: >
              {{ 'red' if is_state('binary_sensor.max_barking','on') else 'grey' }}

          - type: custom:mushroom-entity-card
            entity: binary_sensor.buddy_barking
            name: Buddy Barking
            icon: mdi:dog
            icon_color: >
              {{ 'red' if is_state('binary_sensor.buddy_barking','on') else 'grey' }}

          - type: custom:mushroom-entity-card
            entity: binary_sensor.any_pet_barking
            name: Any Pet Barking
            icon: mdi:dog
            icon_color: >
              {{ 'red' if is_state('binary_sensor.any_pet_barking','on') else 'grey' }}

      - type: grid
        title: Feeding Schedule
        columns: 2
        cards:
          - type: custom:mushroom-number-card
            entity: input_number.pet_feeding_hour_morning
            name: Morning Feed Time
            icon: mdi:clock-outline
            display_mode: buttons

          - type: custom:mushroom-number-card
            entity: input_number.pet_feeding_hour_evening
            name: Evening Feed Time
            icon: mdi:clock-outline
            display_mode: buttons

      - type: grid
        title: Last Fed
        cards:
          - type: entities
            entities:
              - entity: input_datetime.pet_last_fed_max
                name: Max Last Fed
              - entity: input_datetime.pet_last_fed_buddy
                name: Buddy Last Fed

      - type: grid
        title: Feeding Alerts
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.max_feeding_overdue
            name: Max Overdue
            icon: mdi:alert-circle
            icon_color: >
              {{ 'red' if is_state('binary_sensor.max_feeding_overdue','on') else 'green' }}

          - type: custom:mushroom-entity-card
            entity: binary_sensor.buddy_feeding_overdue
            name: Buddy Overdue
            icon: mdi:alert-circle
            icon_color: >
              {{ 'red' if is_state('binary_sensor.buddy_feeding_overdue','on') else 'green' }}

      - type: grid
        title: Calming Controls
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.whitenoise_switch
            name: White Noise
            icon: mdi:speaker
            icon_color: >
              {{ 'blue' if is_state('switch.whitenoise_switch','on') else 'grey' }}
            tap_action:
              action: toggle

  # ==================== ZONE PRESENCE ====================
  - title: Zones
    path: zones
    icon: mdi:map-marker-radius
    type: sections
    background: >
      linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Zone-Based Presence
            subtitle: "Current: {{ states('sensor.current_presence_zone') }}"

      - type: grid
        title: Presence Zones
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.presence_upstairs
            name: Upstairs
            icon: mdi:stairs-up
            icon_color: >
              {{ 'green' if is_state('input_boolean.presence_upstairs','on') else 'grey' }}
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.presence_downstairs
            name: Downstairs
            icon: mdi:stairs-down
            icon_color: >
              {{ 'blue' if is_state('input_boolean.presence_downstairs','on') else 'grey' }}
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.presence_outside
            name: Outside
            icon: mdi:tree
            icon_color: >
              {{ 'amber' if is_state('input_boolean.presence_outside','on') else 'grey' }}
            tap_action:
              action: toggle

      - type: grid
        title: Presence Status
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.current_presence_zone
            name: Current Zone
            icon: mdi:map-marker
            icon_color: green

          - type: custom:mushroom-entity-card
            entity: binary_sensor.someone_home
            name: Someone Home
            icon: mdi:home-account
            icon_color: >
              {{ 'green' if is_state('binary_sensor.someone_home','on') else 'red' }}

      - type: grid
        title: Zone Info
        cards:
          - type: markdown
            content: |
              **üó∫Ô∏è Zone-Based Presence:**

              **How It Works:**
              - Only ONE zone can be active at a time
              - Moving to new zone auto-deactivates others
              - If all zones OFF for 10 min ‚Üí Auto-Away
              - Returning to any zone ‚Üí Auto-Home

              **Zones:**
              - üè† **Upstairs**: Bedrooms, bathrooms
              - üè† **Downstairs**: Living, kitchen, office
              - üå≥ **Outside**: Garden, garage, yard

              **Security:**
              - Nighttime outside alert (10pm-6am)

  # ==================== SIMULATION CONTROLS ====================
  - title: Simulation
    path: simulation
    icon: mdi:test-tube
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: Simulation Controls
            subtitle: Virtual sensors for testing

      - type: grid
        title: Motion Sensors
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.sim_motion_hall
            name: Hall Motion
            icon: mdi:motion-sensor
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.sim_motion_lounge
            name: Lounge Motion
            icon: mdi:motion-sensor
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.sim_motion_bed
            name: Bedroom Motion
            icon: mdi:motion-sensor
            tap_action:
              action: toggle

      - type: grid
        title: Doors & Doorbell
        columns: 3
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.sim_door_front
            name: Front Door
            icon: mdi:door
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.sim_doorbell
            name: Doorbell
            icon: mdi:doorbell
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.sim_dog_door
            name: Dog Door
            icon: mdi:door
            tap_action:
              action: toggle

      - type: grid
        title: Temperature Simulation
        columns: 2
        cards:
          - type: custom:mushroom-number-card
            entity: input_number.sim_temp_lounge
            name: Lounge Temp
            icon: mdi:thermometer
            display_mode: slider

          - type: custom:mushroom-number-card
            entity: input_number.sim_temp_bed
            name: Bedroom Temp
            icon: mdi:thermometer
            display_mode: slider

      - type: grid
        title: Power Simulation
        columns: 3
        cards:
          - type: custom:mushroom-number-card
            entity: input_number.sim_power_tv
            name: TV Power
            icon: mdi:television
            display_mode: buttons

          - type: custom:mushroom-number-card
            entity: input_number.sim_power_kettle
            name: Kettle Power
            icon: mdi:kettle
            display_mode: buttons

          - type: custom:mushroom-number-card
            entity: input_number.sim_power_whitenoise
            name: White Noise Power
            icon: mdi:speaker
            display_mode: buttons

      - type: grid
        title: Mobile Notifications
        cards:
          - type: custom:mushroom-text-card
            entity: input_text.notification_last_action
            name: Simulate Mobile Action
            icon: mdi:cellphone-message

          - type: custom:mushroom-entity-card
            entity: input_boolean.notification_action_received
            name: Action Confirmed
            icon: mdi:check-circle
            icon_color: >
              {{ 'green' if is_state('input_boolean.notification_action_received','on') else 'grey' }}
